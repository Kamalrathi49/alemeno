{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block title %} Add Food {% endblock %}
{% block content %}

  <div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <div class="row mb-2">
                </div>
                <div class="table-responsive">
                  <form action="{% url 'add-food' kid.id %}"  method="post">
                    {% csrf_token %}
                    {{ form.image | as_crispy_field }}<br>
                    <img id="result" style="margin-left: 20%; display: none;" src="" alt="" width="50%" height="40%">
                    {{ form.food_group | as_crispy_field }}<br>
                    {{ form.is_approved | as_crispy_field }}<br>
                    {{ form.approved_by | as_crispy_field }}<br>
                    <div class="modal-footer">
                      <a class="text-decoration-none" href="{% url 'display-food' kid.id %}">
                        <button type="button" class="btn btn-secondary">Cancel</button>
                     </a>                      
                    <button type="submit" class="btn btn-primary">Save</button>
                    </div>
                </form>
                </div>
            </div> 
        </div>    
    </div> 
  </div>
<script>
  const source = document.getElementById('source');
  const result = document.getElementById('result');

  const inputHandler = function(e) {
    result.src = e.target.value;
    result.style.display = 'block'
  }
  
  source.addEventListener('input', inputHandler);
  source.addEventListener('propertychange', inputHandler);
</script>
{% endblock %}